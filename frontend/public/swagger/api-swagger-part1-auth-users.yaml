openapi: 3.0.3
info:
  title: E-Learning Platform API - Part 1 (Auth & Users)
  description: |
    **Comprehensive API Documentation for E-Learning Platform**

    üéì **Overview:**
    - Full-featured online learning platform
    - Role-based access: Student, Teacher, Admin
    - Real-time features with WebSocket
    - Video streaming & WebRTC support

    üìã **Part 1 Coverage:**
    - Authentication & Authorization
    - User Management
    - Profile Operations

    üîê **Authentication:**
    - JWT Bearer Token in Authorization header
    - Token expires in 24h (configurable)
    - Refresh token mechanism available

    üë• **User Roles:**
    - **Student**: Enroll courses, take quizzes, join discussions
    - **Teacher**: Create courses, manage content, grade quizzes
    - **Admin**: Full system access, user management, moderation

  version: 1.0.0
  contact:
    name: API Support
    email: support@elearning.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:5000/api
    description: Local Development Server
  - url: https://api.elearning.com/api
    description: Production Server

tags:
  - name: Authentication
    description: User authentication operations (login, password reset). Admin uses hardcoded credentials from .env
  - name: User Management
    description: User profile and account management
  - name: Admin - Users
    description: Admin operations for user management

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token obtained from login endpoint

  schemas:
    # ============ USER SCHEMAS ============
    User:
      type: object
      properties:
        _id:
          type: string
          example: "507f1f77bcf86cd799439011"
        fullName:
          type: string
          example: "Nguy·ªÖn VƒÉn A"
        email:
          type: string
          format: email
          example: "student@example.com"
        role:
          type: string
          enum: [student, teacher, admin]
          example: "student"
        avatar:
          type: string
          nullable: true
          example: "https://cloudinary.com/avatar.jpg"
        isVerified:
          type: boolean
          example: true
          description: "Email verification status"
        isBanned:
          type: boolean
          example: false
        profileCompleted:
          type: boolean
          example: false
          description: "Teacher profile completion status (only for teachers)"
        profileApprovalStatus:
          type: string
          enum: [pending, approved, rejected]
          nullable: true
          example: null
          description: "Teacher profile approval status (only for teachers)"
        phone:
          type: string
          nullable: true
          example: "+84912345678"
        address:
          type: string
          nullable: true
          example: "123 Nguy·ªÖn Hu·ªá, Q1, TP.HCM"
        bio:
          type: string
          nullable: true
          example: "Software developer passionate about learning"
        socialLinks:
          type: object
          properties:
            facebook:
              type: string
              nullable: true
            linkedin:
              type: string
              nullable: true
            github:
              type: string
              nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    UserRegistration:
      type: object
      required:
        - fullName
        - email
        - password
      properties:
        fullName:
          type: string
          minLength: 2
          maxLength: 50
          example: "Nguy·ªÖn VƒÉn A"
        email:
          type: string
          format: email
          example: "newuser@example.com"
        password:
          type: string
          format: password
          minLength: 6
          example: "SecurePass123"
        role:
          type: string
          enum: [student, teacher]
          default: student
          example: "student"
          description: "User role - selected via radio buttons in UI"
        dateOfBirth:
          type: string
          format: date
          example: "2000-01-01"
          description: "Optional date of birth"

    UserLogin:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          example: "student@example.com"
        password:
          type: string
          format: password
          example: "password123"

    AuthResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        token:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        refreshToken:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        user:
          $ref: "#/components/schemas/User"

    UserProfileUpdate:
      type: object
      properties:
        fullName:
          type: string
          example: "Nguy·ªÖn VƒÉn B"
        phone:
          type: string
          example: "+84912345678"
        address:
          type: string
          example: "456 L√™ L·ª£i, Q1, TP.HCM"
        bio:
          type: string
          example: "Updated bio"
        socialLinks:
          type: object
          properties:
            facebook:
              type: string
            linkedin:
              type: string
            github:
              type: string

    # ============ COMMON SCHEMAS ============
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "Error message"
        errors:
          type: array
          items:
            type: string

    Success:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Operation successful"

    Pagination:
      type: object
      properties:
        page:
          type: integer
          example: 1
        limit:
          type: integer
          example: 10
        total:
          type: integer
          example: 100
        totalPages:
          type: integer
          example: 10

paths:
  # ==================== AUTHENTICATION ====================
  /auth/register:
    post:
      tags:
        - Authentication
      summary: Register new user account (Student/Teacher only)
      description: |
        Register a new user with email, password, and role.

        **‚ö†Ô∏è IMPORTANT: Admin accounts CANNOT be registered via API**
        - Admin role is blocked from registration
        - Only ONE admin account exists (hardcoded in .env)
        - Admin credentials: ADMIN_ACC and ADMIN_PASS

        **UI Changes:**
        - Role selection via **Radio Buttons** (Student/Teacher ONLY)
        - Admin option is NOT available

        **Allowed Roles:**
        - `student` - Can enroll in courses
        - `teacher` - Can create and manage courses (requires profile completion)
        - `admin` - ‚ùå NOT ALLOWED (will return 403 error)

        **Email Verification (MANDATORY):**
        - Verification email sent automatically via SendGrid
        - Account CANNOT login until email is verified
        - Redirects to `/email-verification-required` after registration

        **Teacher Flow:**
        After registration ‚Üí Email Verification ‚Üí Login ‚Üí Complete Profile ‚Üí Admin Approval ‚Üí Dashboard

        **Rate Limiting:**
        - 5 requests per 15 minutes per IP
      operationId: registerUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRegistration"
            examples:
              student:
                summary: Student registration
                value:
                  fullName: "Nguy·ªÖn VƒÉn A"
                  email: "student@example.com"
                  password: "SecurePass123"
                  role: "student"
                  dateOfBirth: "2000-01-01"
              teacher:
                summary: Teacher registration
                value:
                  fullName: "Gi√°o vi√™n Nguy·ªÖn"
                  email: "teacher@example.com"
                  password: "TeacherPass123"
                  role: "teacher"
                  dateOfBirth: "1990-05-15"
      responses:
        "201":
          description: User registered successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Registration successful. Please check your email to verify your account."
                  user:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "507f1f77bcf86cd799439011"
                      fullName:
                        type: string
                        example: "Nguy·ªÖn VƒÉn A"
                      email:
                        type: string
                        example: "student@example.com"
                      role:
                        type: string
                        example: "student"
                      avatar:
                        type: string
                        example: ""
                      isVerified:
                        type: boolean
                        example: false
                      profileCompleted:
                        type: boolean
                        example: false
                      profileApprovalStatus:
                        type: string
                        nullable: true
                        example: null
                  tokens:
                    type: object
                    properties:
                      accessToken:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                      refreshToken:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        "400":
          description: Validation error or email already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                emailExists:
                  value:
                    success: false
                    message: "This email already exists in our system."
                validationError:
                  value:
                    success: false
                    message: "Please fill in all required fields."
        "403":
          description: Admin role registration is forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                adminNotAllowed:
                  value:
                    success: false
                    message: "Admin accounts cannot be registered."
        "429":
          description: Too many registration attempts
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /auth/login:
    post:
      tags:
        - Authentication
      summary: Login to account
      description: |
        Authenticate user with email and password.
        Returns JWT token and user information.

        **‚ö†Ô∏è ADMIN LOGIN:**
        - Admin uses hardcoded credentials from environment variables
        - Username: ADMIN_ACC (from .env)
        - Password: ADMIN_PASS (from .env)
        - Admin account does NOT exist in database
        - Token contains role="admin" for authorization

        **Email Verification Required (Student/Teacher only):**
        - Regular users CANNOT login if email is not verified
        - Returns 403 error with `requiresVerification` flag
        - Admin bypasses email verification

        **Student Login Flow:**
        ```
        Login ‚Üí Check credentials ‚Üí Check isVerified
          ‚îú‚îÄ Not Verified ‚Üí 403 Error + Redirect to /email-verification-required
          ‚îî‚îÄ Verified ‚Üí 200 Success + Redirect to /dashboard
        ```

        **Teacher Login Flow:**
        ```
        Login ‚Üí Check credentials ‚Üí Check isVerified
          ‚îú‚îÄ Not Verified ‚Üí 403 Error + Redirect to /email-verification-required
          ‚îî‚îÄ Verified ‚Üí Check profileCompleted
              ‚îú‚îÄ Not Completed ‚Üí Redirect to /teacher/complete-profile
              ‚îî‚îÄ Completed ‚Üí Check profileApprovalStatus
                  ‚îú‚îÄ pending ‚Üí Redirect to /teacher/approval-pending
                  ‚îú‚îÄ rejected ‚Üí Show error message
                  ‚îî‚îÄ approved ‚Üí Redirect to /dashboard
        ```

        **Admin Login Flow:**
        ```
        Login ‚Üí Check if credentials match ADMIN_ACC & ADMIN_PASS
          ‚îú‚îÄ Match ‚Üí Generate admin token ‚Üí 200 Success + Redirect to /admin/dashboard
          ‚îî‚îÄ No Match ‚Üí Continue checking database for student/teacher accounts
        ```

        **Token Usage:**
        - Include in Authorization header: `Bearer {token}`
        - Access token expires in 15 minutes
        - Refresh token expires in 7 days
        - Use refresh token to get new access token
      operationId: loginUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserLogin"
            examples:
              admin:
                summary: Admin login (hardcoded)
                value:
                  email: "thanh123"
                  password: "nguyenvuthanh"
              student:
                value:
                  email: "student@example.com"
                  password: "password123"
              teacher:
                value:
                  email: "teacher@example.com"
                  password: "password123"
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Login successful."
                  user:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "507f1f77bcf86cd799439011"
                      fullName:
                        type: string
                        example: "Nguy·ªÖn VƒÉn A"
                      email:
                        type: string
                        example: "student@example.com"
                      role:
                        type: string
                        example: "student"
                      avatar:
                        type: string
                        example: ""
                      isVerified:
                        type: boolean
                        example: true
                      profileCompleted:
                        type: boolean
                        example: false
                      profileApprovalStatus:
                        type: string
                        nullable: true
                        example: null
                      profile:
                        type: object
                        nullable: true
                        properties:
                          phone:
                            type: string
                            nullable: true
                          address:
                            type: string
                            nullable: true
                          bio:
                            type: string
                            nullable: true
                          expertise:
                            type: string
                            nullable: true
                            description: "Teacher only"
                          qualifications:
                            type: string
                            nullable: true
                            description: "Teacher only"
                          cvUrl:
                            type: string
                            nullable: true
                            description: "Teacher only"
                  tokens:
                    type: object
                    properties:
                      accessToken:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        "401":
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                success: false
                message: "Invalid email or password."
        "403":
          description: Email not verified (CRITICAL - cannot login)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Your account has not been verified. Please check your email."
                  isVerified:
                    type: boolean
                    example: false
                  requiresVerification:
                    type: boolean
                    example: true
                    description: "Flag indicating email verification is required"
              examples:
                notVerified:
                  summary: Email not verified
                  value:
                    message: "Your account has not been verified. Please check your email."
                    isVerified: false
                    requiresVerification: true

  /auth/logout:
    post:
      tags:
        - Authentication
      summary: Logout from account
      description: Invalidate current session and refresh token
      operationId: logoutUser
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Success"
        "401":
          description: Not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /auth/forgot-password:
    post:
      tags:
        - Authentication
      summary: Request password reset
      description: |
        Send password reset email to user.

        **Process:**
        1. Submit email address
        2. Receive reset link via email
        3. Link expires in 1 hour
        4. Use token to reset password
      operationId: forgotPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  example: "user@example.com"
      responses:
        "200":
          description: Reset email sent
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Success"
              example:
                success: true
                message: "Email kh√¥i ph·ª•c m·∫≠t kh·∫©u ƒë√£ ƒë∆∞·ª£c g·ª≠i"
        "404":
          description: Email not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /auth/reset-password/{token}:
    put:
      tags:
        - Authentication
      summary: Reset password with token
      description: Reset user password using token from email
      operationId: resetPassword
      parameters:
        - name: token
          in: path
          required: true
          schema:
            type: string
          description: Password reset token from email
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - password
              properties:
                password:
                  type: string
                  format: password
                  minLength: 6
                  example: "NewSecurePass123"
      responses:
        "200":
          description: Password reset successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Success"
        "400":
          description: Invalid or expired token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /auth/verify-email:
    post:
      tags:
        - Authentication
      summary: Verify email address
      description: Verify user email with token from registration email
      operationId: verifyEmail
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - token
              properties:
                token:
                  type: string
                  example: "verification-token-from-email"
      responses:
        "200":
          description: Email verified successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Success"
        "400":
          description: Invalid verification token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /auth/resend-verification:
    post:
      tags:
        - Authentication
      summary: Resend verification email
      description: Request new verification email
      operationId: resendVerification
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Verification email sent
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Success"
        "400":
          description: Email already verified
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /auth/refresh-token:
    post:
      tags:
        - Authentication
      summary: Refresh access token
      description: Get new access token using refresh token
      operationId: refreshToken
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
                  example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
      responses:
        "200":
          description: New token generated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  token:
                    type: string
        "401":
          description: Invalid refresh token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # ==================== USER MANAGEMENT ====================
  /users/profile:
    get:
      tags:
        - User Management
      summary: Get current user profile
      description: Retrieve authenticated user's profile information
      operationId: getUserProfile
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  user:
                    $ref: "#/components/schemas/User"
        "401":
          description: Not authenticated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

    put:
      tags:
        - User Management
      summary: Update user profile
      description: Update authenticated user's profile information
      operationId: updateUserProfile
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserProfileUpdate"
      responses:
        "200":
          description: Profile updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  user:
                    $ref: "#/components/schemas/User"
        "400":
          description: Validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /users/avatar:
    post:
      tags:
        - User Management
      summary: Upload user avatar
      description: |
        Upload profile picture for authenticated user.

        **Constraints:**
        - Max file size: 5MB
        - Formats: JPG, PNG, GIF
        - Image auto-resized to 500x500px
        - Uploaded to Cloudinary
      operationId: uploadAvatar
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - avatar
              properties:
                avatar:
                  type: string
                  format: binary
                  description: Image file (JPG, PNG, GIF)
      responses:
        "200":
          description: Avatar uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  avatarUrl:
                    type: string
                    example: "https://cloudinary.com/avatar.jpg"
        "400":
          description: Invalid file or size exceeded
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /users/complete-teacher-profile:
    post:
      tags:
        - User Management
      summary: Complete teacher profile (Teachers only)
      description: |
        Submit complete teacher profile information with CV upload.
        This endpoint is REQUIRED for teachers after email verification and before dashboard access.

        **Prerequisites:**
        - Must be logged in as teacher
        - Email must be verified (isVerified = true)
        - Profile not yet completed (profileCompleted = false)

        **Required Fields:**
        - Phone number
        - Address
        - Bio (personal introduction)
        - Expertise (areas of specialization)
        - Qualifications (education & certifications)
        - CV file (PDF only, max 5MB)

        **Workflow:**
        1. Teacher logs in after email verification
        2. Redirected to `/teacher/complete-profile`
        3. Fills all required fields and uploads CV
        4. Submit ‚Üí CV uploaded to Cloudinary
        5. Backend sets `profileCompleted = true` and `profileApprovalStatus = "pending"`
        6. Redirected to `/teacher/approval-pending`
        7. Wait 24-48 hours for admin review
        8. Admin approves/rejects
        9. Email notification sent
        10. If approved, teacher can access dashboard

        **CV Upload:**
        - File uploaded to Cloudinary folder: "cvs"
        - Returns secure_url and public_id
        - Local file deleted after successful upload
      operationId: completeTeacherProfile
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - phone
                - address
                - bio
                - expertise
                - qualifications
                - cv
              properties:
                phone:
                  type: string
                  example: "0987654321"
                  description: "Teacher's phone number"
                address:
                  type: string
                  example: "123 ƒê∆∞·ªùng ABC, Qu·∫≠n XYZ, TP.HCM"
                  description: "Full address"
                bio:
                  type: string
                  example: "T√¥i l√† gi·∫£ng vi√™n v·ªõi 10 nƒÉm kinh nghi·ªám..."
                  description: "Personal introduction and teaching philosophy"
                expertise:
                  type: string
                  example: "L·∫≠p tr√¨nh Web (React, Node.js), Machine Learning, Data Science"
                  description: "Areas of expertise and specialization"
                qualifications:
                  type: string
                  example: "Th·∫°c sƒ© Khoa h·ªçc M√°y t√≠nh - ƒêH B√°ch Khoa, Ch·ª©ng ch·ªâ AWS Solutions Architect"
                  description: "Educational background, degrees, and certifications"
                cv:
                  type: string
                  format: binary
                  description: "CV file in PDF format (max 5MB)"
      responses:
        "200":
          description: Profile submitted successfully, awaiting admin approval
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Profile submitted successfully. Please wait for admin approval (at least 48 hours)."
                  data:
                    type: object
                    properties:
                      profileCompleted:
                        type: boolean
                        example: true
                      profileApprovalStatus:
                        type: string
                        example: "pending"
        "400":
          description: Validation error or profile already completed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                missingFields:
                  value:
                    success: false
                    message: "All fields are required."
                alreadyCompleted:
                  value:
                    success: false
                    message: "Profile has already been completed."
                invalidFile:
                  value:
                    success: false
                    message: "CV file is required."
        "403":
          description: Not authorized or email not verified
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                notTeacher:
                  value:
                    success: false
                    message: "Only teachers can complete this profile."
                notVerified:
                  value:
                    success: false
                    message: "Please verify your email first."
        "500":
          description: Server error (e.g., CV upload failed)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                success: false
                message: "Failed to upload CV."

  # ==================== ADMIN USER MANAGEMENT ====================
  /users/list:
    get:
      tags:
        - Admin - Users
      summary: Get all users (Admin only)
      description: |
        Retrieve paginated list of all users with filters.

        **Filters:**
        - Role: student, teacher, admin
        - Status: active, banned, unverified
        - Search: by name or email

        **Pagination:**
        - Default: 10 users per page
        - Max: 100 users per page
      operationId: getUserList
      security:
        - BearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
            maximum: 100
          description: Users per page
        - name: role
          in: query
          schema:
            type: string
            enum: [student, teacher, admin]
          description: Filter by role
        - name: status
          in: query
          schema:
            type: string
            enum: [active, banned, unverified]
          description: Filter by status
        - name: search
          in: query
          schema:
            type: string
          description: Search by name or email
      responses:
        "200":
          description: User list retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  users:
                    type: array
                    items:
                      $ref: "#/components/schemas/User"
                  pagination:
                    $ref: "#/components/schemas/Pagination"
        "403":
          description: Not authorized (admin only)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /users/{id}/role:
    put:
      tags:
        - Admin - Users
      summary: Update user role (Admin only)
      description: Change user's role (student/teacher/admin)
      operationId: updateUserRole
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: User ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - role
              properties:
                role:
                  type: string
                  enum: [student, teacher, admin]
                  example: "teacher"
      responses:
        "200":
          description: Role updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Success"
        "403":
          description: Not authorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /users/{id}/ban:
    put:
      tags:
        - Admin - Users
      summary: Ban or unban user (Admin only)
      description: Toggle user ban status
      operationId: banUser
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: User ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - isBanned
              properties:
                isBanned:
                  type: boolean
                  example: true
      responses:
        "200":
          description: Ban status updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Success"
        "403":
          description: Not authorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /users/{id}:
    delete:
      tags:
        - Admin - Users
      summary: Delete user account (Admin only)
      description: Permanently delete user and associated data
      operationId: deleteUser
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: User ID
      responses:
        "200":
          description: User deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Success"
        "403":
          description: Not authorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
